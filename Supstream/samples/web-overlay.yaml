# This configuration show a video from demux MKV
# GST_PLUGIN_PATH=Release:$GST_PLUGIN_PATH gst-launch-1.0 \
#    cefsrc url="https://soundcloud.com/platform/sama" ! \
#    video/x-raw, width=1920, height=1080, framerate=60/1 ! cefdemux name=d d.video ! \
#    queue max-size-bytes=0 max-size-buffers=0 max-size-time=3000000000 ! videoconvert ! \
#    xvimagesink audiotestsrc do-timestamp=true is-live=true  volume=0.00 ! audiomixer name=mix ! \
#    queue max-size-bytes=0 max-size-buffers=0 max-size-time=3000000000 ! audioconvert ! pulsesink \
#    d.audio ! mix.

supstream:
    zmq_path: "tcp://0.0.0.0:5557"

pipelines:
    
    web-overlay:

        init_state: play
        type_exec: sync

        elements:

            #####################
            # WEB VIDEO OVERLAY #
            #####################

            cefsrc:
                element: cefsrc
                properties:
                    url: https://soundcloud.com/platform/sama
                element_link: cefdemux

            cefdemux:
                element: cefdemux
                pad_link:
                    pad_video:
                        from: video_0
                        to:
                            name: queue_video
                            pad: sink

            queue_video:
                element: queue
                properties:
                    max-size-bytes: 0
                    max-size-buffers: 0
                    max-size-time: 3000000000
                element_link: videoconvert_video

            videoconvert_video:
                element: videoconvert
                element_link: xvimagesink_video

            xvimagesink_video:
                element: xvimagesink

            #####################
            # WEB AUDIO OVERLAY #
            #####################
